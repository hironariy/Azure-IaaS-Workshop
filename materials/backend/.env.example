# =============================================================================
# Backend Environment Configuration - LOCAL DEVELOPMENT ONLY
# =============================================================================
# This file is for LOCAL DEVELOPMENT using Docker Compose MongoDB
# 
# PRODUCTION: Environment variables are injected by Bicep CustomScript
# See: /design/BackendApplicationDesign.md - Workshop Configuration: Parameter File Pattern
#
# Copy this file to .env for local development
# NEVER commit .env to version control
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
NODE_ENV=development
PORT=3000

# =============================================================================
# MongoDB Connection - LOCAL DEVELOPMENT
# =============================================================================
# Docker Compose replica set (no authentication required)
# Start with: docker-compose -f dev-environment/docker-compose.yml up -d
MONGODB_URI=mongodb://localhost:27017,localhost:27018/blogapp?replicaSet=blogapp-rs0

# =============================================================================
# Microsoft Entra ID - LOCAL DEVELOPMENT
# =============================================================================
# For local development, get these from Azure Portal:
# - Tenant ID: Azure Portal > Microsoft Entra ID > Overview > Tenant ID
# - Client ID: Azure Portal > App registrations > Your Backend App > Application (client) ID
ENTRA_TENANT_ID=your-tenant-id
ENTRA_CLIENT_ID=your-client-id

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=debug

# =============================================================================
# CORS - LOCAL DEVELOPMENT
# =============================================================================
# Allow frontend dev server
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# PRODUCTION CONFIGURATION REFERENCE
# =============================================================================
# In production (Azure VMs), these values are injected by Bicep:
#
# NODE_ENV=production
# PORT=3000
# LOG_LEVEL=info
# MONGODB_URI=mongodb://blogapp:BlogAppUser2024@10.0.3.4:27017,10.0.3.5:27017/blogapp?replicaSet=blogapp-rs0&authSource=blogapp
# ENTRA_TENANT_ID=<from main.bicepparam>
# ENTRA_CLIENT_ID=<from main.bicepparam>
#
# See: /materials/bicep/modules/compute/app-tier.bicep
# =============================================================================
